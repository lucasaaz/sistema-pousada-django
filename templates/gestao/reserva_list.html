<!-- ========================================================================== -->
<!-- ARQUIVO: templates/gestao/reserva_list.html (NOVO)                         -->
<!-- ========================================================================== -->
{% extends 'base.html' %}
{% block title %}Lista de Reservas{% endblock %}
{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Reservas</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <a href="{% url 'reserva_add' %}" class="btn btn-sm btn-primary">
            <i class="bi bi-plus-lg"></i> Adicionar Nova Reserva
        </a>
    </div>
</div>

<div class="mb-4">
<form method="get" action="{% url 'reserva_list' %}" class="row g-3 align-items-end">
<div class="col-md-6">
<label for="id_q" class="form-label">Buscar por Hóspede, Acomodação ou CPF</label>
<input type="text" class="form-control" id="id_q" name="q" placeholder="Nome, nº da acomodação ou CPF" value="{{ request.GET.q|default:'' }}">
</div>
<div class="col-md-4">
<label for="id_checkin_date" class="form-label">Data de Check-in</label>
<input type="date" class="form-control" id="id_checkin_date" name="checkin_date" value="{{ request.GET.checkin_date|default:'' }}">
</div>
<div class="col-md-2">
<button class="btn btn-outline-success w-100" type="submit">Buscar</button>
</div>
</form>
</div>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Cliente</th>
                <th>Acomodação</th>
                <th>Check-in</th>
                <th>Check-out</th>
                <th>Status</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for reserva in reservas %}
            <tr>
                <td>{{ reserva.cliente.nome_completo }}</td>
                <td>{{ reserva.acomodacao }}</td>
                <td>{{ reserva.data_checkin|date:"d/m/Y" }}</td>
                <td>{{ reserva.data_checkout|date:"d/m/Y" }}</td>
                <td><span class="badge bg-info">{{ reserva.get_status_display }}</span></td>
                <td>
                    <a href="{% url 'reserva_detail' reserva.pk %}" class="btn btn-sm btn-info">
                        <i class="bi bi-eye"></i> Ver Detalhes
                    </a>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="6" class="text-center">Nenhuma reserva encontrada.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}